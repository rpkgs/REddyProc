<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Post Processing of (Half-)Hourly Eddy-Covariance Measurements • REddyProc</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Post Processing of (Half-)Hourly Eddy-Covariance Measurements">
<meta property="og:description" content="Standard and extensible Eddy-Covariance data post-processing (Wutzler et al. (2018) &lt;doi:10.5194/bg-15-5015-2018&gt;) includes uStar-filtering, gap-filling, and flux-partitioning. The Eddy-Covariance (EC) micrometeorological technique quantifies continuous exchange fluxes of gases, energy, and momentum between an ecosystem and the atmosphere. It is important for understanding ecosystem dynamics and upscaling exchange fluxes. (Aubinet et al. (2012) &lt;doi:10.1007/978-94-007-2351-1&gt;). This package inputs pre-processed (half-)hourly data and supports further processing. First, a quality-check and filtering is performed based on the relationship between measured flux and friction velocity (uStar) to discard biased data (Papale et al. (2006) &lt;doi:10.5194/bg-3-571-2006&gt;). Second, gaps in the data are filled based on information from environmental conditions (Reichstein et al. (2005) &lt;doi:10.1111/j.1365-2486.2005.001002.x&gt;). Third, the net flux of carbon dioxide is partitioned into its gross fluxes in and out of the ecosystem by night-time based and day-time based approaches (Lasslop et al. (2010) &lt;doi:10.1111/j.1365-2486.2009.02041.x&gt;).">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">REddyProc</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.3.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/aggUncertainty.html">Uncertainty aggregation</a>
    </li>
    <li>
      <a href="articles/bigleaf.html">Using bigleaf functions</a>
    </li>
    <li>
      <a href="articles/DEGebExample.html">UNKNOWN TITLE</a>
    </li>
    <li>
      <a href="articles/gapFilling.html">UNKNOWN TITLE</a>
    </li>
    <li>
      <a href="articles/useCase.html">REddyProc typical workflow</a>
    </li>
    <li>
      <a href="articles/uStarCases.html">UNKNOWN TITLE</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/bgctw/REddyProc/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="contents col-md-9">


<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p><code>REddyProc</code> package supports processing (half)hourly data from Eddy-Covariance sensors.</p>
<p>There is an online-formular to use the functionality of the package including description at <a href="https://www.bgc-jena.mpg.de/bgi/index.php/Services/REddyProcWeb" class="external-link uri">https://www.bgc-jena.mpg.de/bgi/index.php/Services/REddyProcWeb</a>.</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Release stable version from CRAN</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"REddyProc"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># The development version from GitHub using devtools:</span></span>
<span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"EarthyScience/REddyProc"</span><span class="op">)</span></span></code></pre></div>
<p>The REddyProc~package requires a quite recent versions of the tidyverse packages. On encountering problems on installations with older versions should run the following code before installing REddyProc.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"tidyverse"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/update.packages.html" class="external-link">update.packages</a></span><span class="op">(</span>oldPkgs<span class="op">=</span><span class="st">"dplyr"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<p>A simple example performs Lookuptable-based gapfilling of Net-Ecosystem-Exchange (NEE) and plotting a fingerprint plot of the filled values.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://www.bgc-jena.mpg.de/bgi/index.php/Services/REddyProcWeb" class="external-link">REddyProc</a></span><span class="op">)</span></span>
<span><span class="co">#+++ Input data from csv (example needs to be downloaded)</span></span>
<span><span class="va">examplePath</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/getExamplePath.html">getExamplePath</a></span><span class="op">(</span><span class="st">'Example_DETha98.txt'</span>, isTryDownload <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">examplePath</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">EddyData</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/fLoadTXTIntoDataframe.html">fLoadTXTIntoDataframe</a></span><span class="op">(</span><span class="va">examplePath</span><span class="op">)</span></span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/warning.html" class="external-link">warning</a></span><span class="op">(</span></span>
<span>      <span class="st">"Could not find example text data file."</span></span>
<span>      ,<span class="st">" In order to execute this example code,"</span></span>
<span>      ,<span class="st">" please, allow downloading it from github. "</span> </span>
<span>      ,<span class="st">" Type '?getExamplePath' for more information."</span><span class="op">)</span></span>
<span>  <span class="co"># using RData version distributed with the package instead</span></span>
<span>  <span class="va">EddyData</span> <span class="op">&lt;-</span> <span class="va">Example_DETha98</span></span>
<span><span class="op">}</span></span>
<span><span class="co">#+++ If not provided, calculate VPD from Tair and rH</span></span>
<span><span class="va">EddyData</span><span class="op">$</span><span class="va">VPD</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/fCalcVPDfromRHandTair.html">fCalcVPDfromRHandTair</a></span><span class="op">(</span><span class="va">EddyData</span><span class="op">$</span><span class="va">rH</span>, <span class="va">EddyData</span><span class="op">$</span><span class="va">Tair</span><span class="op">)</span></span>
<span><span class="co">#+++ Add time stamp in POSIX time format</span></span>
<span><span class="va">EddyDataWithPosix</span> <span class="op">&lt;-</span> <span class="va">EddyData</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="reference/filterLongRuns.html">filterLongRuns</a></span><span class="op">(</span><span class="st">"NEE"</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="reference/fConvertTimeToPosix.html">fConvertTimeToPosix</a></span><span class="op">(</span><span class="st">'YDH'</span>, Year <span class="op">=</span> <span class="st">'Year'</span>, Day <span class="op">=</span> <span class="st">'DoY'</span>, Hour <span class="op">=</span> <span class="st">'Hour'</span><span class="op">)</span></span>
<span><span class="co">#+++ Initalize R5 reference class sEddyProc for processing of eddy data</span></span>
<span><span class="co">#+++ with all variables needed for processing later</span></span>
<span><span class="va">EProc</span> <span class="op">&lt;-</span> <span class="va"><a href="reference/sEddyProc.html">sEddyProc</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span>
<span>  <span class="st">'DE-Tha'</span>, <span class="va">EddyDataWithPosix</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'NEE'</span>,<span class="st">'Rg'</span>,<span class="st">'Tair'</span>,<span class="st">'VPD'</span>, <span class="st">'Ustar'</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#Location of DE-Tharandt</span></span>
<span><span class="va">EProc</span><span class="op">$</span><span class="fu">sSetLocationInfo</span><span class="op">(</span>LatDeg <span class="op">=</span> <span class="fl">51.0</span>, LongDeg <span class="op">=</span> <span class="fl">13.6</span>, TimeZoneHour <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>  </span>
<span><span class="co">#</span></span>
<span><span class="co">#++ Fill NEE gaps with MDS gap filling algorithm (without prior ustar filtering)</span></span>
<span><span class="va">EProc</span><span class="op">$</span><span class="fu">sMDSGapFill</span><span class="op">(</span><span class="st">'NEE'</span>, FillAll <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#</span></span>
<span><span class="co">#++ Export gap filled and partitioned data to standard data frame</span></span>
<span><span class="va">FilledEddyData</span> <span class="op">&lt;-</span> <span class="va">EProc</span><span class="op">$</span><span class="fu">sExportResults</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#</span></span>
<span><span class="co">#++ Example plots of filled data to screen or to directory \plots</span></span>
<span><span class="va">EProc</span><span class="op">$</span><span class="fu">sPlotFingerprintY</span><span class="op">(</span><span class="st">'NEE_f'</span>, Year <span class="op">=</span> <span class="fl">1998</span><span class="op">)</span></span></code></pre></div>
<p><img src="README-example-1.png"><!-- --></p>
<p>Further examples are in <a href="https://github.com/EarthyScience/REddyProc/blob/master/vignettes/useCase.md" class="external-link">vignette(useCase)</a> and <a href="https://github.com/EarthyScience/REddyProc/blob/master/vignettes/DEGebExample.md" class="external-link">vignette(DEGebExample)</a> and further md-files of the <a href="https://github.com/EarthyScience/REddyProc/blob/master/vignettes" class="external-link">vignettes directory</a>.</p>
</div>
<div class="section level2">
<h2 id="docker-images">Docker images<a class="anchor" aria-label="anchor" href="#docker-images"></a>
</h2>
<p>Docker images are provided that comprise rstudio, rocker/tidyverse, and REddyProc. There are different version for the latest push to github, for the version on CRAN and for specific tags starting from 1.1.4.</p>
<ul>
<li>EarthyScience/reddyproc:latest<br>
</li>
<li>EarthyScience/reddyproc_cran</li>
<li>EarthyScience/reddyproc:<code>tag</code>
</li>
</ul>
<p>They are usually run with installed docker by typing at a shell:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>docker run <span class="sc">--</span>rm <span class="sc">-</span>p <span class="dv">8787</span><span class="sc">:</span><span class="dv">8787</span> <span class="sc">-</span>e PASSWORD<span class="ot">=</span>REddyProc <span class="sc">&lt;</span>imagename<span class="sc">&gt;</span></span></code></pre></div>
<p>Then the loading url <code>localhost:8787</code> in a browser window should bring up RStudio<br>
(default username is rstudio and password was set to REddyProc), where you can type the above usage example.</p>
<p>For processing your own files in docker you need to mount local directories with the <a href="https://docs.docker.com/storage/bind-mounts/" class="external-link">–mount option</a>, e.g. <code>--mount type=bind,source=/home/twutz/devR,target=/home/rstudio/devR -e USERID=$UID</code></p>
</div>
<div class="section level2">
<h2 id="reference">Reference<a class="anchor" aria-label="anchor" href="#reference"></a>
</h2>
<p>The methodology and benchmark of <code>REddyProc</code> 1.1.3 is described in the following paper:</p>
<p>Wutzler, T., Lucas-Moffat, A., Migliavacca, M., Knauer, J., Sickel, K., Šigut, L., Menzer, O., and Reichstein, M. (2018): Basic and extensible post-processing of eddy covariance flux data with REddyProc, Biogeosciences, 15, 5015-5030, <a href="https://doi.org/10.5194/bg-15-5015-2018" class="external-link uri">https://doi.org/10.5194/bg-15-5015-2018</a>.</p>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=REddyProc" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/bgctw/REddyProc/" class="external-link">Browse source code</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>GPL (&gt;= 2)</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing REddyProc</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Thomas Wutzler <br><small class="roles"> Author, maintainer </small>  </li>
<li>Markus Reichstein <br><small class="roles"> Author </small>  </li>
<li>Antje Maria Moffat <br><small class="roles"> Author, translator </small>  </li>
<li>Mirco Migliavacca <br><small class="roles"> Author </small>  </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="http://cran.r-project.org/package=REddyProc" class="external-link"><img src="http://www.r-pkg.org/badges/version/REddyProc" alt="CRAN_Status_Badge"></a></li>
<li><a href="https://github.com/EarthyScience/REddyProc/actions" class="external-link"><img src="https://github.com/EarthyScience/REddyProc/workflows/R-CMD-check/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Thomas Wutzler, Markus Reichstein, Antje Maria Moffat, Mirco Migliavacca.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer>
</div>






  </body>
</html>
